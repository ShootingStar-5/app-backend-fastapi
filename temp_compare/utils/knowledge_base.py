"""
건강기능식품 도메인 지식 베이스

증상-영양소 매핑, 성분 상호작용, 복용 시간 가이드 등
도메인 전문 지식을 제공합니다.

※ 이 파일은 scripts/update_knowledge_base.py에 의해 자동 생성되었습니다.
"""
from typing import Dict, List, Optional
from utils.logger import get_logger

logger = get_logger(__name__)


class HealthKnowledgeBase:
    """건강기능식품 지식 베이스"""
    
    # FAQ 데이터셋 기반 기본 추천
    DEFAULT_RECOMMENDATIONS = {
        "관절통": {
            "products": ['MSM', '글루코사민', '비타민D', '오메가3', '칼슘', '커큐민', '콘드로이틴'],
            "message": """글루코사민과 콘드로이틴은 연골 구성 성분으로 관절 연골 재생과 보호에 도움이 됩니다.""",
            "tips": ['가벼운 운동', '바른 자세 유지', '스트레칭', '온찜질', '체중 관리'],
            "faqs": [
                {
                    "question": """무릎이 시큰거리고 계단 오르내리기 힘든데 연골 보호제가 도움될까요?""",
                    "answer": """글루코사민과 콘드로이틴은 연골 구성 성분으로 관절 연골 재생과 보호에 도움이 됩니다."""
                },
                {
                    "question": """손가락 관절이 뻣뻣하고 아픈데 관절염 초기 증상인가요?""",
                    "answer": """MSM(메틸설포닐메탄)은 항염 작용이 있어 관절 통증과 부종을 완화합니다."""
                },
                {
                    "question": """허리 통증이 심한데 디스크 예방에 좋은 영양제가 있나요?""",
                    "answer": """오메가3와 커큐민은 염증성 사이토카인을 억제하여 관절염 증상을 개선하는 데 효과적입니다."""
                },
                {
                    "question": """운동 후 관절이 붓고 아픈데 회복에 도움되는 성분은?""",
                    "answer": """글루코사민과 콘드로이틴은 연골 구성 성분으로 관절 연골 재생과 보호에 도움이 됩니다."""
                },
                {
                    "question": """날씨가 흐리면 관절이 더 아픈데 왜 그런가요?""",
                    "answer": """MSM(메틸설포닐메탄)은 항염 작용이 있어 관절 통증과 부종을 완화합니다."""
                },
            ]
        },
        "기억력저하": {
            "products": ['레시틴', '비타민B군', '아세틸L-카르니틴', '오메가3', '은행잎추출물', '포스파티딜세린'],
            "message": """오메가3의 DHA는 뇌세포막의 주요 구성 성분으로 신경전달과 기억 형성에 필수적입니다.""",
            "tips": ['규칙적 운동', '독서)', '두뇌 활동(퍼즐', '사회적 교류', '새로운 학습', '충분한 수면'],
            "faqs": [
                {
                    "question": """최근 깜빡하는 일이 많아졌는데 두뇌 건강에 좋은 영양제는?""",
                    "answer": """오메가3의 DHA는 뇌세포막의 주요 구성 성분으로 신경전달과 기억 형성에 필수적입니다."""
                },
                {
                    "question": """업무 중 집중력이 떨어지는데 인지 기능 개선 방법이 있나요?""",
                    "answer": """포스파티딜세린은 뇌세포 간 신호 전달을 돕고 인지 기능과 집중력 향상에 효과적입니다."""
                },
                {
                    "question": """이름이나 단어가 잘 생각나지 않는데 기억력 향상 방법은?""",
                    "answer": """은행잎 추출물은 뇌혈류를 개선하여 산소와 영양소 공급을 증가시킵니다."""
                },
                {
                    "question": """멀티태스킹이 어려워진 것 같은데 뇌 기능 강화 방법 알려주세요.""",
                    "answer": """오메가3의 DHA는 뇌세포막의 주요 구성 성분으로 신경전달과 기억 형성에 필수적입니다."""
                },
                {
                    "question": """공부할 때 집중이 안 되는데 도움되는 영양소가 있나요?""",
                    "answer": """포스파티딜세린은 뇌세포 간 신호 전달을 돕고 인지 기능과 집중력 향상에 효과적입니다."""
                },
            ]
        },
        "눈피로": {
            "products": ['루테인', '비타민A', '빌베리', '아스타잔틴', '오메가3', '제아잔틴'],
            "message": """루테인과 제아잔틴은 황반 색소 밀도를 높여 블루라이트로부터 눈을 보호합니다. 장기간 화면 노출 시 필수적입니다.""",
            "tips": ['20-20-20 규칙', '눈 마사지', '블루라이트 차단', '인공눈물 사용', '충분한 수면'],
            "faqs": [
                {
                    "question": """하루 종일 모니터를 보는데 눈 건강에 좋은 영양제가 있나요?""",
                    "answer": """루테인과 제아잔틴은 황반 색소 밀도를 높여 블루라이트로부터 눈을 보호합니다. 장기간 화면 노출 시 필수적입니다."""
                },
                {
                    "question": """눈이 자주 충혈되고 건조한데 어떻게 관리해야 하나요?""",
                    "answer": """안구 건조는 오메가3의 항염 작용으로 개선될 수 있으며, 눈물막 안정성을 높입니다."""
                },
                {
                    "question": """야간 운전 시 시야가 흐릿한데 개선 방법이 있을까요?""",
                    "answer": """아스타잔틴은 강력한 항산화제로 눈의 모양체근 피로를 줄이고 초점 조절 능력을 향상시킵니다."""
                },
                {
                    "question": """눈 초점이 잘 안 맞고 침침한데 어떤 성분이 도움될까요?""",
                    "answer": """루테인과 제아잔틴은 황반 색소 밀도를 높여 블루라이트로부터 눈을 보호합니다. 장기간 화면 노출 시 필수적입니다."""
                },
                {
                    "question": """스마트폰 사용 후 눈이 아픈데 예방할 수 있나요?""",
                    "answer": """안구 건조는 오메가3의 항염 작용으로 개선될 수 있으며, 눈물막 안정성을 높입니다."""
                },
            ]
        },
        "두통": {
            "products": ['리보플라빈(B2)', '마그네슘', '오메가3', '은행잎추출물', '코큐텐'],
            "message": """긴장성 두통은 마그네슘 부족과 관련이 있으며, 혈관 확장으로 인한 편두통은 리보플라빈과 코큐텐이 도움이 됩니다.""",
            "tips": ['규칙적인 휴식', '목 스트레칭', '블루라이트 차단', '온찜질', '충분한 수분 섭취'],
            "faqs": [
                {
                    "question": """편두통이 자주 발생하는데 완화 방법이 있을까요?""",
                    "answer": """긴장성 두통은 마그네슘 부족과 관련이 있으며, 혈관 확장으로 인한 편두통은 리보플라빈과 코큐텐이 도움이 됩니다."""
                },
                {
                    "question": """목과 어깨 결림으로 두통이 생기는데 어떻게 해야 하나요?""",
                    "answer": """목과 어깨 근육 긴장으로 인한 두통은 마그네슘 보충과 스트레칭으로 완화될 수 있습니다."""
                },
                {
                    "question": """긴장성 두통으로 고생 중인데 도움될 영양제가 있나요?""",
                    "answer": """뇌혈류 개선을 위한 은행잎 추출물과 오메가3가 두통 빈도를 줄이는 데 도움이 됩니다."""
                },
                {
                    "question": """컴퓨터 작업 후 머리가 아픈데 예방할 수 있나요?""",
                    "answer": """긴장성 두통은 마그네슘 부족과 관련이 있으며, 혈관 확장으로 인한 편두통은 리보플라빈과 코큐텐이 도움이 됩니다."""
                },
                {
                    "question": """스트레스 받으면 두통이 심해지는데 관리 방법 알려주세요.""",
                    "answer": """목과 어깨 근육 긴장으로 인한 두통은 마그네슘 보충과 스트레칭으로 완화될 수 있습니다."""
                },
            ]
        },
        "면역저하": {
            "products": ['로얄젤리', '비타민C', '비타민D', '셀레늄', '아연', '프로폴리스', '홍삼'],
            "message": """비타민C와 아연은 백혈구 기능을 강화하고 항체 생성을 돕습니다. 면역세포 활성화에 필수적인 영양소입니다.""",
            "tips": ['규칙적 운동', '균형잡힌 식사', '손 씻기', '스트레스 관리', '충분한 수면'],
            "faqs": [
                {
                    "question": """환절기마다 감기에 걸리는데 면역력 강화 방법이 있을까요?""",
                    "answer": """비타민C와 아연은 백혈구 기능을 강화하고 항체 생성을 돕습니다. 면역세포 활성화에 필수적인 영양소입니다."""
                },
                {
                    "question": """상처가 잘 낫지 않는데 영양 부족인가요?""",
                    "answer": """비타민D는 면역조절 기능이 있으며, 특히 호흡기 감염 예방에 효과적입니다. 햇빛 노출이 부족하면 보충이 필요합니다."""
                },
                {
                    "question": """자주 아픈 편인데 면역력을 높이려면 어떻게 해야 하나요?""",
                    "answer": """프로폴리스와 홍삼은 자연 면역력을 높이고 피로 회복을 돕습니다. 지속적인 섭취가 중요합니다."""
                },
                {
                    "question": """독감 예방을 위해 어떤 영양제를 먹으면 좋을까요?""",
                    "answer": """비타민C와 아연은 백혈구 기능을 강화하고 항체 생성을 돕습니다. 면역세포 활성화에 필수적인 영양소입니다."""
                },
                {
                    "question": """피로하면 바로 몸살이 나는데 체질 개선이 가능한가요?""",
                    "answer": """비타민D는 면역조절 기능이 있으며, 특히 호흡기 감염 예방에 효과적입니다. 햇빛 노출이 부족하면 보충이 필요합니다."""
                },
            ]
        },
        "빈혈": {
            "products": ['구리', '비타민B12', '비타민C', '엽산', '철분'],
            "message": """철분은 헤모글로빈 합성에 필수적이며, 비타민C와 함께 섭취하면 흡수율이 증가합니다. 엽산과 비타민B12도 적혈구 생성에 필요합니다.""",
            "tips": ['규칙적 식사', '따뜻한 차', '비타민C 함께 섭취', '철분 많은 식사', '충분한 휴식'],
            "faqs": [
                {
                    "question": """자주 어지럽고 현기증이 나는데 철분제를 먹어야 하나요?""",
                    "answer": """철분은 헤모글로빈 합성에 필수적이며, 비타민C와 함께 섭취하면 흡수율이 증가합니다. 엽산과 비타민B12도 적혈구 생성에 필요합니다."""
                },
                {
                    "question": """숨이 차고 계단 오르기 힘든데 빈혈 증상인가요?""",
                    "answer": """어지럼증과 피로는 산소 운반 능력 저하로 나타나는 빈혈의 대표적 증상입니다. 철분 보충과 함께 규칙적인 식사가 중요합니다."""
                },
                {
                    "question": """손발이 차갑고 창백한데 혈액순환 개선 방법은?""",
                    "answer": """손발 냉증은 말초 혈액순환 저하와 관련이 있으며, 은행잎 추출물이 혈류 개선에 도움이 됩니다."""
                },
                {
                    "question": """생리 기간에 특히 피곤한데 철분 보충이 필요한가요?""",
                    "answer": """철분은 헤모글로빈 합성에 필수적이며, 비타민C와 함께 섭취하면 흡수율이 증가합니다. 엽산과 비타민B12도 적혈구 생성에 필요합니다."""
                },
                {
                    "question": """빈혈 진단을 받았는데 식단 외에 영양제를 먹어야 하나요?""",
                    "answer": """어지럼증과 피로는 산소 운반 능력 저하로 나타나는 빈혈의 대표적 증상입니다. 철분 보충과 함께 규칙적인 식사가 중요합니다."""
                },
            ]
        },
        "소화불량": {
            "products": ['L-글루타민', '소화효소', '식이섬유', '알로에베라', '유산균', '페퍼민트'],
            "message": """소화 효소(프로테아제, 아밀라제, 리파제)는 음식물 분해를 돕고 소화 부담을 줄입니다.""",
            "tips": ['과식 피하기', '규칙적인 식사', '식후 산책', '자극적 음식 줄이기', '천천히 씹기'],
            "faqs": [
                {
                    "question": """식사 후 항상 더부룩한데 소화 효소가 필요한가요?""",
                    "answer": """소화 효소(프로테아제, 아밀라제, 리파제)는 음식물 분해를 돕고 소화 부담을 줄입니다."""
                },
                {
                    "question": """가스가 자주 차고 배가 아픈데 어떻게 해야 하나요?""",
                    "answer": """유산균(프로바이오틱스)은 장내 미생물 균형을 개선하고 장 운동을 정상화합니다. 변비와 설사 모두에 도움이 됩니다."""
                },
                {
                    "question": """만성 변비로 고생 중인데 식이섬유 외에 다른 방법이 있나요?""",
                    "answer": """L-글루타민은 장벽 세포의 에너지원으로 장 점막 회복과 보호에 중요합니다."""
                },
                {
                    "question": """위산 역류로 불편한데 완화에 도움되는 영양제가 있을까요?""",
                    "answer": """소화 효소(프로테아제, 아밀라제, 리파제)는 음식물 분해를 돕고 소화 부담을 줄입니다."""
                },
                {
                    "question": """과민성 대장 증후군인데 장 건강 개선 방법 알려주세요.""",
                    "answer": """유산균(프로바이오틱스)은 장내 미생물 균형을 개선하고 장 운동을 정상화합니다. 변비와 설사 모두에 도움이 됩니다."""
                },
            ]
        },
        "손발저림": {
            "products": ['마그네슘', '비타민B1', '비타민B12', '알파리포산', '오메가3', '은행잎추출물'],
            "message": """비타민B1(티아민)과 B12는 말초신경 기능 유지에 필수적이며, 결핍 시 신경병증이 나타날 수 있습니다.""",
            "tips": ['규칙적 운동', '금연', '바른 자세', '스트레칭', '온찜질'],
            "faqs": [
                {
                    "question": """손발이 자주 저리고 차가운데 혈액순환 개선 방법은?""",
                    "answer": """비타민B1(티아민)과 B12는 말초신경 기능 유지에 필수적이며, 결핍 시 신경병증이 나타날 수 있습니다."""
                },
                {
                    "question": """밤에 손발 저림으로 깨는데 신경 건강에 좋은 영양제가 있나요?""",
                    "answer": """알파리포산은 신경 재생을 돕고 당뇨병성 신경병증 증상 완화에 효과적입니다."""
                },
                {
                    "question": """손가락 끝이 저리고 감각이 둔한데 비타민 부족인가요?""",
                    "answer": """은행잎 추출물은 말초 혈액순환을 개선하여 손발 저림과 냉증 완화에 도움이 됩니다."""
                },
                {
                    "question": """오래 앉아있으면 다리가 저린데 예방 방법 알려주세요.""",
                    "answer": """비타민B1(티아민)과 B12는 말초신경 기능 유지에 필수적이며, 결핍 시 신경병증이 나타날 수 있습니다."""
                },
                {
                    "question": """당뇨는 아닌데 손발 저림이 있으면 어떤 검사를 해야 하나요?""",
                    "answer": """알파리포산은 신경 재생을 돕고 당뇨병성 신경병증 증상 완화에 효과적입니다."""
                },
            ]
        },
        "수면장애": {
            "products": ['GABA', '글리신', '마그네슘', '멜라토닌', '발레리안', '테아닌'],
            "message": """멜라토닌은 수면-각성 주기를 조절하는 호르몬으로 잠드는 시간을 단축시킵니다. 취침 30분~1시간 전 복용이 효과적입니다.""",
            "tips": ['규칙적 기상', '전자기기 차단', '취침 루틴 만들기', '침실 어둡게', '카페인 줄이기'],
            "faqs": [
                {
                    "question": """잠들기까지 시간이 오래 걸리는데 도움되는 영양제가 있나요?""",
                    "answer": """멜라토닌은 수면-각성 주기를 조절하는 호르몬으로 잠드는 시간을 단축시킵니다. 취침 30분~1시간 전 복용이 효과적입니다."""
                },
                {
                    "question": """자다가 자주 깨는데 깊은 수면을 위한 방법 알려주세요.""",
                    "answer": """마그네슘은 신경계를 이완시키고 GABA 수용체를 활성화하여 수면의 질을 개선합니다."""
                },
                {
                    "question": """충분히 자도 개운하지 않은데 수면의 질을 높이려면?""",
                    "answer": """글리신은 체온을 낮추고 뇌파를 안정시켜 깊은 수면을 유도합니다."""
                },
                {
                    "question": """불면증으로 고생 중인데 멜라토닌 외에 다른 방법이 있나요?""",
                    "answer": """멜라토닌은 수면-각성 주기를 조절하는 호르몬으로 잠드는 시간을 단축시킵니다. 취침 30분~1시간 전 복용이 효과적입니다."""
                },
                {
                    "question": """꿈을 너무 많이 꿔서 피곤한데 개선 방법이 있을까요?""",
                    "answer": """마그네슘은 신경계를 이완시키고 GABA 수용체를 활성화하여 수면의 질을 개선합니다."""
                },
            ]
        },
        "스트레스": {
            "products": ['GABA', 'L-테아닌', '로디올라', '마그네슘', '비타민B6', '아슈와간다', '아연'],
            "message": """코티솔 호르몬 균형과 신경 안정을 위해 아슈와간다와 L-테아닌이 효과적입니다. 적응소(adaptogen) 성분이 스트레스 반응을 조절합니다.""",
            "tips": ['규칙적인 운동', '명상 10분', '심호흡 5분', '충분한 수면', '취미 활동'],
            "faqs": [
                {
                    "question": """업무 스트레스가 심한데 긴장을 풀 수 있는 방법이 있을까요?""",
                    "answer": """코티솔 호르몬 균형과 신경 안정을 위해 아슈와간다와 L-테아닌이 효과적입니다. 적응소(adaptogen) 성분이 스트레스 반응을 조절합니다."""
                },
                {
                    "question": """불안하고 예민해서 잠이 안 오는데 어떤 영양제가 좋을까요?""",
                    "answer": """GABA와 마그네슘은 신경 전달물질로 작용하여 불안감을 줄이고 긴장을 완화하는 데 도움이 됩니다."""
                },
                {
                    "question": """스트레스로 소화가 안 되는데 개선 방법이 있나요?""",
                    "answer": """비타민B6와 아연은 세로토닌 합성에 필요하며, 감정 조절과 스트레스 대응력 향상에 중요합니다."""
                },
                {
                    "question": """감정 기복이 심한데 안정에 도움되는 성분이 있나요?""",
                    "answer": """코티솔 호르몬 균형과 신경 안정을 위해 아슈와간다와 L-테아닌이 효과적입니다. 적응소(adaptogen) 성분이 스트레스 반응을 조절합니다."""
                },
                {
                    "question": """긴장을 자주 해서 몸이 경직되는데 완화 방법 알려주세요.""",
                    "answer": """GABA와 마그네슘은 신경 전달물질로 작용하여 불안감을 줄이고 긴장을 완화하는 데 도움이 됩니다."""
                },
            ]
        },
        "심장두근거림": {
            "products": ['마그네슘', '오메가3', '칼륨', '코큐텐', '테아닌', '호손베리'],
            "message": """마그네슘과 칼륨은 심장 박동을 조절하는 전해질로 결핍 시 부정맥이 나타날 수 있습니다.""",
            "tips": ['규칙적 운동', '깊은 호흡', '스트레스 관리', '충분한 수면', '카페인 줄이기'],
            "faqs": [
                {
                    "question": """가슴이 두근거리고 불안한데 심장 건강에 좋은 영양제가 있나요?""",
                    "answer": """마그네슘과 칼륨은 심장 박동을 조절하는 전해질로 결핍 시 부정맥이 나타날 수 있습니다."""
                },
                {
                    "question": """긴장하면 심장이 빨리 뛰는데 완화 방법 알려주세요.""",
                    "answer": """테아닌은 긴장을 완화하고 자율신경계를 안정시켜 스트레스성 심계항진을 줄입니다."""
                },
                {
                    "question": """카페인 섭취 후 심장이 두근거리는데 관리 방법이 있나요?""",
                    "answer": """코큐텐은 심장 근육의 에너지 생성을 돕고 심혈관 건강을 지원합니다."""
                },
                {
                    "question": """부정맥 증상이 있는데 전해질 보충이 필요한가요?""",
                    "answer": """마그네슘과 칼륨은 심장 박동을 조절하는 전해질로 결핍 시 부정맥이 나타날 수 있습니다."""
                },
                {
                    "question": """밤에 심장이 두근거려서 잠들기 힘든데 어떻게 해야 하나요?""",
                    "answer": """테아닌은 긴장을 완화하고 자율신경계를 안정시켜 스트레스성 심계항진을 줄입니다."""
                },
            ]
        },
        "요통": {
            "products": ['MSM', '글루코사민', '마그네슘', '비타민D', '칼슘', '커큐민'],
            "message": """MSM과 글루코사민은 척추 디스크와 연골 건강 유지에 도움이 되며 염증성 통증을 완화합니다.""",
            "tips": ['무거운 물건 조심', '바른 자세', '적정 체중 유지', '코어 근력 운동', '허리 스트레칭'],
            "faqs": [
                {
                    "question": """허리 통증으로 일상생활이 불편한데 디스크 관리 방법은?""",
                    "answer": """MSM과 글루코사민은 척추 디스크와 연골 건강 유지에 도움이 되며 염증성 통증을 완화합니다."""
                },
                {
                    "question": """앉았다 일어날 때 허리가 아픈데 근육 강화 방법 알려주세요.""",
                    "answer": """비타민D와 칼슘은 뼈 건강에 필수적이며, 척추 골밀도 유지와 골다공증 예방에 중요합니다."""
                },
                {
                    "question": """만성 요통이 있는데 염증 완화에 도움되는 영양제가 있나요?""",
                    "answer": """커큐민은 강력한 항염 작용으로 요통과 관련된 염증을 줄이는 데 효과적입니다."""
                },
                {
                    "question": """장시간 운전 후 허리가 아픈데 예방 방법이 있을까요?""",
                    "answer": """MSM과 글루코사민은 척추 디스크와 연골 건강 유지에 도움이 되며 염증성 통증을 완화합니다."""
                },
                {
                    "question": """허리 디스크 예방을 위해 미리 먹으면 좋은 영양제는?""",
                    "answer": """비타민D와 칼슘은 뼈 건강에 필수적이며, 척추 골밀도 유지와 골다공증 예방에 중요합니다."""
                },
            ]
        },
        "우울감": {
            "products": ['SAMe', '비타민B6', '비타민D', '아슈와간다', '오메가3', '테아닌'],
            "message": """비타민D는 세로토닌 합성에 관여하며, 부족 시 우울감과 계절성 정서 장애가 나타날 수 있습니다.""",
            "tips": ['가벼운 운동', '규칙적 생활', '사회적 교류', '취미 활동', '햇빛 20분'],
            "faqs": [
                {
                    "question": """의욕이 없고 무기력한 상태가 지속되는데 어떻게 해야 하나요?""",
                    "answer": """비타민D는 세로토닌 합성에 관여하며, 부족 시 우울감과 계절성 정서 장애가 나타날 수 있습니다."""
                },
                {
                    "question": """기분이 자주 가라앉고 우울한데 도움되는 영양소가 있나요?""",
                    "answer": """오메가3는 뇌의 염증을 줄이고 신경전달물질 균형을 개선하여 우울증 완화에 도움이 됩니다."""
                },
                {
                    "question": """감정 기복이 심한데 호르몬 균형에 좋은 영양제는?""",
                    "answer": """아슈와간다는 코티솔 수치를 낮추고 스트레스 반응을 조절하여 기분 안정에 효과적입니다."""
                },
                {
                    "question": """계절성 우울감이 있는데 겨울철 관리 방법 알려주세요.""",
                    "answer": """비타민D는 세로토닌 합성에 관여하며, 부족 시 우울감과 계절성 정서 장애가 나타날 수 있습니다."""
                },
                {
                    "question": """스트레스와 우울감이 동시에 오는데 개선 방법이 있나요?""",
                    "answer": """오메가3는 뇌의 염증을 줄이고 신경전달물질 균형을 개선하여 우울증 완화에 도움이 됩니다."""
                },
            ]
        },
        "체중증가": {
            "products": ['CLA', 'L-카르니틴', '가르시니아캄보지아', '녹차추출물', '크롬'],
            "message": """L-카르니틴은 지방을 에너지로 전환하는 과정을 돕고 운동 시 지방 연소를 촉진합니다.""",
            "tips": ['고단백 저탄수화물', '규칙적 식사', '근력 운동', '유산소 운동', '충분한 수면'],
            "faqs": [
                {
                    "question": """다이어트 중인데 식욕 조절에 도움되는 영양제가 있나요?""",
                    "answer": """L-카르니틴은 지방을 에너지로 전환하는 과정을 돕고 운동 시 지방 연소를 촉진합니다."""
                },
                {
                    "question": """운동해도 체중이 안 빠지는데 대사 개선 방법이 있을까요?""",
                    "answer": """크롬은 인슐린 감수성을 개선하여 혈당 조절과 식욕 억제에 도움이 됩니다."""
                },
                {
                    "question": """야식이 끊기지 않는데 식욕 억제에 효과적인 방법은?""",
                    "answer": """CLA(공액리놀레산)는 체지방 감소와 근육량 유지에 효과적이며 기초대사량 향상에 도움이 됩니다."""
                },
                {
                    "question": """붓기가 심한데 수분 배출에 도움되는 영양소가 있나요?""",
                    "answer": """L-카르니틴은 지방을 에너지로 전환하는 과정을 돕고 운동 시 지방 연소를 촉진합니다."""
                },
                {
                    "question": """살이 찌기 쉬운 체질인데 기초대사량을 높이려면?""",
                    "answer": """크롬은 인슐린 감수성을 개선하여 혈당 조절과 식욕 억제에 도움이 됩니다."""
                },
            ]
        },
        "피로감": {
            "products": ['L-카르니틴', '마그네슘', '비타민B콤플렉스', '비타민C', '비타민D', '아연', '철분', '코엔자임Q10'],
            "message": """에너지 대사에 필요한 비타민B군과 마그네슘이 부족할 수 있습니다. 또한 미토콘드리아 기능 저하가 만성 피로의 원인이 될 수 있습니다.""",
            "tips": ['규칙적인 운동 30분', '수면 7~8시간 유지', '스트레칭', '카페인 줄이기', '햇빛 20분'],
            "faqs": [
                {
                    "question": """아침에 일어나도 계속 피곤한데 어떤 영양제가 도움될까요?""",
                    "answer": """에너지 대사에 필요한 비타민B군과 마그네슘이 부족할 수 있습니다. 또한 미토콘드리아 기능 저하가 만성 피로의 원인이 될 수 있습니다."""
                },
                {
                    "question": """오후만 되면 기력이 떨어지는데 개선 방법이 있을까요?""",
                    "answer": """근육 회복과 에너지 생성을 돕는 코엔자임Q10과 L-카르니틴이 도움이 됩니다. 충분한 수면과 규칙적인 운동도 중요합니다."""
                },
                {
                    "question": """운동 후 회복이 너무 느린 것 같아요. 어떤 보충제가 좋을까요?""",
                    "answer": """철분 부족으로 인한 산소 운반 능력 저하가 피로의 원인일 수 있습니다. 비타민C와 함께 섭취하면 흡수율이 높아집니다."""
                },
                {
                    "question": """만성 피로로 일상생활이 힘든데 어떻게 해야 하나요?""",
                    "answer": """에너지 대사에 필요한 비타민B군과 마그네슘이 부족할 수 있습니다. 또한 미토콘드리아 기능 저하가 만성 피로의 원인이 될 수 있습니다."""
                },
                {
                    "question": """충분히 자도 피곤한 이유가 뭘까요?""",
                    "answer": """근육 회복과 에너지 생성을 돕는 코엔자임Q10과 L-카르니틴이 도움이 됩니다. 충분한 수면과 규칙적인 운동도 중요합니다."""
                },
            ]
        },
        "피부노화": {
            "products": ['레스베라트롤', '비타민C', '비타민E', '셀레늄', '콜라겐', '히알루론산'],
            "message": """콜라겐은 피부 진피층의 주요 단백질로 탄력과 수분 유지에 필수적입니다. 비타민C와 함께 섭취하면 합성이 촉진됩니다.""",
            "tips": ['규칙적 수면', '금연', '자외선 차단', '충분한 수분', '항산화 식품'],
            "faqs": [
                {
                    "question": """주름이 늘어나는 것 같은데 피부 탄력에 좋은 영양제는?""",
                    "answer": """콜라겐은 피부 진피층의 주요 단백질로 탄력과 수분 유지에 필수적입니다. 비타민C와 함께 섭취하면 합성이 촉진됩니다."""
                },
                {
                    "question": """얼굴 피부가 처지고 탄력이 없는데 콜라겐 보충이 필요한가요?""",
                    "answer": """히알루론산은 수분 보유 능력이 뛰어나 피부 건조를 예방하고 주름을 완화합니다."""
                },
                {
                    "question": """피부 톤이 칙칙하고 잡티가 생겼는데 개선 방법이 있나요?""",
                    "answer": """비타민E와 셀레늄은 항산화제로 자외선과 활성산소로부터 피부를 보호합니다."""
                },
                {
                    "question": """눈가 주름이 심해지는데 예방할 수 있는 방법은?""",
                    "answer": """콜라겐은 피부 진피층의 주요 단백질로 탄력과 수분 유지에 필수적입니다. 비타민C와 함께 섭취하면 합성이 촉진됩니다."""
                },
                {
                    "question": """피부 건조함으로 주름이 더 생기는 것 같은데 어떻게 해야 하나요?""",
                    "answer": """히알루론산은 수분 보유 능력이 뛰어나 피부 건조를 예방하고 주름을 완화합니다."""
                },
            ]
        },
        "피부트러블": {
            "products": ['비타민B5', '비타민C', '비타민E', '아연', '오메가3', '콜라겐', '프로바이오틱스'],
            "message": """아연은 피지 분비를 조절하고 염증성 여드름을 완화합니다. 피부 재생에도 필수적인 미네랄입니다.""",
            "tips": ['규칙적 수면', '세안 철저히', '스트레스 관리', '자외선 차단', '충분한 수분 섭취'],
            "faqs": [
                {
                    "question": """성인 여드름이 계속 나는데 내부적 원인이 있을까요?""",
                    "answer": """아연은 피지 분비를 조절하고 염증성 여드름을 완화합니다. 피부 재생에도 필수적인 미네랄입니다."""
                },
                {
                    "question": """피부가 건조하고 각질이 심한데 보습 외에 필요한 게 있나요?""",
                    "answer": """비타민C와 콜라겐은 피부 탄력과 재생을 돕고, 흉터와 색소침착 개선에 효과적입니다."""
                },
                {
                    "question": """얼굴이 자주 붉어지고 따가운데 민감성 피부 개선 방법은?""",
                    "answer": """오메가3의 항염 작용은 민감성 피부의 홍조와 염증을 줄이는 데 도움이 됩니다."""
                },
                {
                    "question": """피부 톤이 칙칙하고 생기가 없는데 어떤 영양소가 필요한가요?""",
                    "answer": """아연은 피지 분비를 조절하고 염증성 여드름을 완화합니다. 피부 재생에도 필수적인 미네랄입니다."""
                },
                {
                    "question": """여드름 자국이 잘 안 없어지는데 재생에 도움되는 성분은?""",
                    "answer": """비타민C와 콜라겐은 피부 탄력과 재생을 돕고, 흉터와 색소침착 개선에 효과적입니다."""
                },
            ]
        },
        "혈당불안정": {
            "products": ['마그네슘', '비타민D', '시나몬추출물', '식이섬유', '알파리포산', '크롬'],
            "message": """크롬은 인슐린 민감도를 높여 혈당 조절을 돕고 당 대사를 개선합니다.""",
            "tips": ['규칙적 식사', '규칙적 운동', '단순당 줄이기', '식이섬유 섭취', '천천히 씹기'],
            "faqs": [
                {
                    "question": """식후 졸음이 심한데 혈당 조절에 도움되는 영양제가 있나요?""",
                    "answer": """크롬은 인슐린 민감도를 높여 혈당 조절을 돕고 당 대사를 개선합니다."""
                },
                {
                    "question": """단 음식이 자꾸 당기는데 혈당 관리 방법 알려주세요.""",
                    "answer": """식이섬유는 당 흡수 속도를 늦춰 혈당 스파이크를 예방하고 포만감을 높입니다."""
                },
                {
                    "question": """공복감을 자주 느끼는데 혈당 균형을 맞추려면?""",
                    "answer": """마그네슘은 인슐린 분비와 포도당 대사에 관여하여 혈당 균형 유지에 필수적입니다."""
                },
                {
                    "question": """저혈당 증상이 자주 오는데 예방 방법이 있을까요?""",
                    "answer": """크롬은 인슐린 민감도를 높여 혈당 조절을 돕고 당 대사를 개선합니다."""
                },
                {
                    "question": """당뇨 전단계인데 혈당 관리를 위한 영양제 추천 부탁드립니다.""",
                    "answer": """식이섬유는 당 흡수 속도를 늦춰 혈당 스파이크를 예방하고 포만감을 높입니다."""
                },
            ]
        },
        "혈압상승": {
            "products": ['L-테아닌', '마그네슘', '오메가3', '칼륨', '코큐텐', '히비스커스'],
            "message": """오메가3는 혈관 탄력성을 높이고 염증을 줄여 혈압 조절에 도움이 됩니다.""",
            "tips": ['규칙적 운동', '스트레스 관리', '저염식', '체중 관리', '카페인 줄이기'],
            "faqs": [
                {
                    "question": """혈압이 높게 나왔는데 혈관 건강에 좋은 영양제가 있나요?""",
                    "answer": """오메가3는 혈관 탄력성을 높이고 염증을 줄여 혈압 조절에 도움이 됩니다."""
                },
                {
                    "question": """스트레스 받으면 혈압이 오르는데 관리 방법 알려주세요.""",
                    "answer": """칼륨은 나트륨 배출을 촉진하여 혈압을 낮추는 데 중요한 미네랄입니다. 저염식과 함께 실천하면 효과적입니다."""
                },
                {
                    "question": """두근거림과 얼굴 홍조가 있는데 혈압과 관련이 있나요?""",
                    "answer": """코큐텐(CoQ10)은 혈관 내피 기능을 개선하고 산화 스트레스를 줄여 혈압 관리에 도움이 됩니다."""
                },
                {
                    "question": """고혈압 가족력이 있는데 예방을 위해 무엇을 해야 하나요?""",
                    "answer": """오메가3는 혈관 탄력성을 높이고 염증을 줄여 혈압 조절에 도움이 됩니다."""
                },
                {
                    "question": """혈압약 외에 자연스럽게 혈압을 낮출 수 있는 방법이 있나요?""",
                    "answer": """칼륨은 나트륨 배출을 촉진하여 혈압을 낮추는 데 중요한 미네랄입니다. 저염식과 함께 실천하면 효과적입니다."""
                },
            ]
        },
        "호흡곤란": {
            "products": ['NAC', '마그네슘', '비타민C', '코큐텐', '프로폴리스'],
            "message": """코큐텐은 세포 에너지 생성을 돕고 심폐 지구력 향상에 도움이 됩니다.""",
            "tips": ['규칙적 운동', '금연', '스트레스 관리', '실내 환기', '천천히 호흡'],
            "faqs": [
                {
                    "question": """조금만 움직여도 숨이 차는데 폐 기능 개선 방법이 있나요?""",
                    "answer": """코큐텐은 세포 에너지 생성을 돕고 심폐 지구력 향상에 도움이 됩니다."""
                },
                {
                    "question": """가슴이 답답하고 호흡이 불편한데 도움되는 영양소가 있나요?""",
                    "answer": """비타민C와 프로폴리스는 호흡기 면역을 강화하고 염증을 완화합니다."""
                },
                {
                    "question": """운동할 때 호흡이 빨리 가빠지는데 지구력 향상 방법은?""",
                    "answer": """테아닌은 불안으로 인한 과호흡을 진정시키고 호흡을 안정시키는 데 도움이 됩니다."""
                },
                {
                    "question": """기침 후 숨쉬기 힘든데 호흡기 건강 관리 방법 알려주세요.""",
                    "answer": """코큐텐은 세포 에너지 생성을 돕고 심폐 지구력 향상에 도움이 됩니다."""
                },
                {
                    "question": """천식은 아닌데 가끔 호흡이 불규칙한데 원인이 뭘까요?""",
                    "answer": """비타민C와 프로폴리스는 호흡기 면역을 강화하고 염증을 완화합니다."""
                },
            ]
        },
    }
    
    def __init__(self):
        logger.info("건강기능식품 지식 베이스 초기화")
    
    def get_default_recommendation(self, query: str) -> Optional[Dict]:
        """기본 추천 조회"""
        for category, info in self.DEFAULT_RECOMMENDATIONS.items():
            if any(keyword in query for keyword in category.split("/")):                return {
                    "category": category,
                    **info
                }
        return None
    
    def get_nutrients_for_symptom(self, symptom: str) -> Optional[Dict]:
        """증상에 대한 추천 영양소 조회"""
        # DEFAULT_RECOMMENDATIONS에서 증상 매칭
        for category, info in self.DEFAULT_RECOMMENDATIONS.items():
            if any(keyword in symptom for keyword in category.split("/")):
                return {
                    "category": category,
                    "nutrients": info["products"],
                    "description": info["message"]
                }
        return None
    
    def get_interaction_info(self, ingredient: str) -> Optional[Dict]:
        """성분 상호작용 정보 조회 (기본 정보 반환)"""
        # 간단한 상호작용 정보 (필요시 확장 가능)
        basic_interactions = {
            "칼슘": {
                "ingredient": "칼슘",
                "avoid_with": ["철분", "카페인"],
                "synergy_with": ["비타민D", "마그네슘"],
                "timing": "저녁 식후",
                "reason": "밤에 뼈 형성이 활발"
            },
            "철분": {
                "ingredient": "철분",
                "avoid_with": ["칼슘", "녹차", "커피"],
                "synergy_with": ["비타민C"],
                "timing": "공복 또는 식간",
                "reason": "비타민C와 함께 섭취 시 흡수율 증가"
            },
            "오메가3": {
                "ingredient": "오메가3",
                "avoid_with": [],
                "synergy_with": ["비타민E"],
                "timing": "식후",
                "reason": "지용성으로 식사와 함께 흡수율 증가"
            },
            "마그네슘": {
                "ingredient": "마그네슘",
                "avoid_with": [],
                "synergy_with": ["칼슘", "비타민D"],
                "timing": "저녁 또는 취침 전",
                "reason": "근육 이완과 수면 개선 효과"
            }
        }
        
        for key, info in basic_interactions.items():
            if key in ingredient or ingredient in key:
                return info
        return None
    
    def get_timing_recommendation(self, ingredient: str) -> Optional[Dict]:
        """복용 시간 추천"""
        timing_guide = {
            "지용성_비타민": {
                "ingredients": ["비타민A", "비타민D", "비타민E", "비타민K", "오메가3"],
                "timing": "식후",
                "reason": "지방과 함께 섭취 시 흡수율 증가"
            },
            "수용성_비타민": {
                "ingredients": ["비타민B", "비타민C"],
                "timing": "아침 식후",
                "reason": "에너지 대사에 관여하여 아침 섭취 권장"
            },
            "취침_전": {
                "ingredients": ["칼슘", "마그네슘"],
                "timing": "취침 30분~1시간 전",
                "reason": "수면 개선 및 야간 뼈 형성 촉진"
            }
        }
        
        for category, info in timing_guide.items():
            if any(ing in ingredient or ingredient in ing for ing in info["ingredients"]):
                return {
                    "category": category,
                    "timing": info["timing"],
                    "reason": info["reason"]
                }
        return None
    
    def get_all_symptom_keywords(self) -> List[str]:
        """모든 증상 키워드 목록"""
        keywords = []
        for category in self.DEFAULT_RECOMMENDATIONS.keys():
            keywords.extend(category.split("/"))
        return list(set(keywords))
    
    def get_all_ingredients(self) -> List[str]:
        """모든 성분 목록"""
        ingredients = set()
        for info in self.DEFAULT_RECOMMENDATIONS.values():
            ingredients.update(info["products"])
        return list(ingredients)
